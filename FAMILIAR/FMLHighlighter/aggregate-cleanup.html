<div class="code"><pre><span class="n">fm1</span> <span class="o">=</span> <span class="kd">FM</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">B</span> <span class="o">[</span><span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">;</span> <span class="n">D</span> <span class="o">:</span> <span class="o">(</span><span class="n">E</span><span class="o">|</span><span class="n">F</span><span class="o">)</span> <span class="o">;</span> <span class="n">C</span> <span class="o">-&gt;</span> <span class="o">!</span><span class="n">E</span><span class="o">;</span> <span class="o">)</span>
<span class="n">fm2</span> <span class="o">=</span> <span class="kd">FM</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">J</span> <span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">L</span> <span class="o">;</span> <span class="o">)</span>				
<span class="n">fm3</span> <span class="o">=</span> <span class="kd">FM</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="o">(</span><span class="n">N</span><span class="o">|</span><span class="n">O</span><span class="o">|</span><span class="n">P</span><span class="o">)+</span> <span class="o">;</span> <span class="o">)</span>
<span class="n">cst</span> <span class="o">=</span> <span class="kd">constraints</span> <span class="o">(</span><span class="n">J</span> <span class="kd">implies</span> <span class="n">C</span> <span class="o">;</span> <span class="o">)</span>
<span class="n">fm4</span> <span class="o">=</span> <span class="kd">aggregate</span> <span class="n">fm</span><span class="o">*</span> <span class="kd">withMapping</span> <span class="n">cst</span> <span class="c1">// equivalent to aggregate { fm1 fm2 fm3 }</span>

<span class="c1">// simplify fm4 (e.g., by removing dead features)</span>

<span class="kd">cleanup</span> <span class="n">fm4</span> 

<span class="n">op</span> <span class="o">=</span> <span class="kd">operator</span> <span class="n">fm4</span><span class="o">.</span><span class="n">F</span>
<span class="k">assert</span> <span class="o">(</span><span class="n">op</span> <span class="kd">eq</span> <span class="kd">mand</span><span class="o">)</span> <span class="c1">// mandatory status since E is no longer in the Xor-group</span>

 <span class="c1">// renaming of the root feature </span>
 
<span class="n">rfm4</span> <span class="o">=</span> <span class="kd">root</span> <span class="n">fm4</span>
<span class="kd">renameFeature</span> <span class="n">rfm4</span> <span class="kd">as</span> <span class="s">&quot;MySPL&quot;</span>
 
</pre></div>
